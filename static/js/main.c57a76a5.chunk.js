(this.webpackJsonpmatsurisu_mania=this.webpackJsonpmatsurisu_mania||[]).push([[0],{10:function(e,t,a){},11:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(4),c=a.n(o),i=(a(10),a(2)),l=a(1);function s(e){var t=e.y,a=e.setY,o=Object(n.useState)(!1),c=Object(i.a)(o,2),l=c[0],s=c[1],m=Object(n.useState)(0),u=Object(i.a)(m,2),f=u[0],h=u[1],d=function(){return s(!1)};return r.a.createElement("div",{className:"scroller",onPointerDown:function(e){var t=e.clientY;s(!0),h(t)},onPointerLeave:d,onPointerCancel:d,onPointerUp:d,onPointerMove:function(e){var n=e.clientY;l&&(a(t+(n-f)),h(n))},onWheel:function(e){var n=e.deltaY;return a(t-n/2)}})}var m={width:625,height:0,y:0};function u(e,t){var a=t.type,n=t.value;switch(a){case"SET_HEIGHT":return Object(l.a)(Object(l.a)({},e),{},{height:n});case"SET_WIDTH":return Object(l.a)(Object(l.a)({},e),{},{width:n});case"SET_Y":return Object(l.a)(Object(l.a)({},e),{},{y:Math.max(Math.min(n,0),-1e4)});default:return e}}var f=Object(n.createContext)(0),h=Object(n.createContext)(m);function d(e){var t=e.children,a=Object(n.useReducer)(u,m),o=Object(i.a)(a,2),c=o[0],l=o[1],d=Object(n.useState)(0),E=Object(i.a)(d,2),p=E[0],v=E[1],w=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=setInterval((function(){return v(p+1)}),100);return function(){return clearInterval(e)}}),[p,v]);var b=Object(n.useCallback)((function(){if(w.current){var e=w.current.getBoundingClientRect();l({type:"SET_HEIGHT",value:e.height}),l({type:"SET_WIDTH",value:e.width})}}),[w,l]);return Object(n.useEffect)((function(){return window.addEventListener("resize",b),function(){return window.removeEventListener("resize",b)}}),[b]),Object(n.useLayoutEffect)(b,[b]),r.a.createElement(f.Provider,{value:p},r.a.createElement(h.Provider,{value:c},r.a.createElement(s,{y:c.y,setY:function(e){return l({type:"SET_Y",value:e})}}),r.a.createElement("div",{className:"main",ref:w},t)))}function E(e){var t=e.position,a=e.offset,o=e.stay,c=e.factor,l=e.children,s=Object(n.useRef)(null),m=Object(n.useContext)(h),u=Object(n.useState)(0),f=Object(i.a)(u,2),d=f[0],E=f[1];t=t||0,a=a||0,o=void 0===o?300:o;var p=(m.y+t)*c,v=Math.max(Math.min(p+o*c,0),p)+m.height/2+a,w=Math.floor(100*c),b=v-2*d>m.height||v+2*d<0,g=Object(n.useCallback)((function(){s.current&&E(s.current.getBoundingClientRect().height)}),[s,E]);return Object(n.useLayoutEffect)(g,[g]),b?null:r.a.createElement("div",{ref:s,className:"parallax",style:{left:0,top:v,zIndex:w}},r.a.Children.map(l,(function(e){return r.a.cloneElement(e,{onLoad:g})})))}function p(e){var t=e.control,a=e.frameDur,n=e.srcs,o=e.alt,c=e.style,i=e.onLoad,l=function(e,t,a){return t=t||1,Math.floor(e/t)%a}(t,a,n.length);return r.a.createElement("img",{alt:o,style:c,src:n[l],onLoad:i})}function v(e){var t=e.frameDur,a=e.srcs,o=e.alt,c=e.style,i=e.onLoad,l=Object(n.useContext)(f);return r.a.createElement(p,Object.assign({control:l},{frameDur:t,srcs:a,alt:o,style:c,onLoad:i}))}function w(e){var t=e.name,a=e.x,n=e.y,o=e.center,c=e.width,s=e.tint,m=e.onLoad,u={};if(u=o?{display:"block",margin:"0 auto"}:{display:"inline-block",position:"relative",marginLeft:a||0,marginTop:n||0},c&&(u=Object(l.a)(Object(l.a)({},u),{},{width:c,height:"auto"})),s){var f=Object(i.a)(s,2),h=f[0],d=f[1];u=Object(l.a)(Object(l.a)({},u),{},{filter:"brightness(".concat(h,") hue-rotate(").concat(d,"deg)")})}return r.a.createElement(v,{alt:"matsurisu",style:u,frameDur:5,onLoad:m,srcs:["/matsurisu/static/img/risu/".concat(t,"1.png"),"/matsurisu/static/img/risu/".concat(t,"2.png")]})}function b(e){var t=e.children,a=e.start,o=e.end,c=e.fadeDur,i=e.offset,l=e.layer;i=i||0,c=c||300,l=void 0===l?0:l;var s=Object(n.useContext)(h),m=-s.y,u=m>a-c&&m<o+c,f=1-(Math.max(Math.min((a-m)/c,1),0)+Math.max(Math.min((m-o)/c,1),0)),d=s.height/2+i;return u?r.a.createElement("div",{className:"fade",style:{top:d,opacity:f,zIndex:l}},t):null}function g(e){var t=e.zoomStart,a=e.zoomDur,o=e.zoomEnd,c=e.initialZoom,i=e.totalHeight,l=Object(n.useContext)(h),s=l.width,m=l.height,u=l.y;if(u+t>0||u+o<0)return null;for(var f=Math.pow(Math.min(Math.max(-(u+t)/a,0),1),.6),d=m-(m/2+i/2)*f,E=(c-1)*(1-f)+1,p=(2*Math.ceil(s/(2*E))+1)/2,v=Math.floor(s/2-p),b=Math.floor(s/2+p),g=Math.ceil((m-d)/E),y=[],j=0;j<g;j++){for(var O=[],x=v;x<b;x++){var M="(".concat(x,",").concat(j,")");O.push(r.a.createElement(w,{key:M,name:"pixel",width:E,x:0,y:0}))}y.push(r.a.createElement("div",{className:"pixel-row",key:"row".concat(j),style:{height:E}},O))}return r.a.createElement("div",{style:{position:"absolute",top:d,width:s}},y)}function y(e){var t=e.zoomStart,a=e.zoomDur,o=e.fadeStart,c=e.fadeDur,i=e.initialZoom,l=e.totalHeight,s=Object(n.useContext)(h),m=s.width,u=s.height,f=s.y;if(f+t>0)return null;var d=Math.pow(Math.min(Math.max(-(f+t)/a,0),1),.6),E=u-(u/2+l/2)*d,p=(i-1)*(1-d)+1,v=1-Math.max(Math.min((o+c+f)/c,1),0);return r.a.createElement("div",{className:"mosaic-wrapper",style:{top:E,opacity:v}},r.a.createElement("img",{className:"mosaic",alt:"matsuri",style:{width:p*m,height:p*l},src:"/matsurisu/static/img/mosaic_monochrome.gif"}))}var j=function(){return r.a.createElement(d,null,r.a.createElement(E,{factor:1,position:0,offset:-50,stay:0},r.a.createElement(w,{name:"sit",width:200,center:!0})),r.a.createElement(b,{start:0,end:0,offset:50},r.a.createElement("p",{className:"title"},"\u307e\u3064\u308a\u3059")),r.a.createElement(E,{factor:1,position:800,offset:-50},r.a.createElement(w,{name:"cheer",width:200,center:!0})),r.a.createElement(b,{start:800,end:1100,offset:50},r.a.createElement("p",{className:"title"},"\u305d\u308c\u306f\u3001\u590f\u8272\u307e\u3064\u308a\u3092\u611b\u3059\u308b\u3082\u306e")),r.a.createElement(E,{factor:1,position:1600,offset:-50},r.a.createElement(w,{name:"wave",width:180,center:!0})),r.a.createElement(b,{start:1600,end:1900,offset:50},r.a.createElement("p",{className:"title"},"\u3044\u308d\u3093\u306a\u307e\u3064\u308a\u3059\u304c\u3044\u308b")),r.a.createElement(E,{factor:1.5,position:2400,offset:0},r.a.createElement(w,{name:"art",width:200,x:50})),r.a.createElement(E,{factor:1,position:2400,offset:0},r.a.createElement("p",{className:"title-right"},"\u7d75\u304c\u63cf\u3051\u308b\u307e\u3064\u308a\u3059")),r.a.createElement(E,{factor:1.5,position:3200,offset:0},r.a.createElement(w,{name:"music",width:200,x:400})),r.a.createElement(E,{factor:1,position:3200,offset:0},r.a.createElement("p",{className:"title-left"},"\u97f3\u697d\u304c\u3067\u304d\u308b\u307e\u3064\u308a\u3059")),r.a.createElement(E,{factor:1.5,position:4e3,offset:-50},r.a.createElement(w,{name:"pc",width:200,center:!0})),r.a.createElement(E,{factor:1,position:4e3,offset:50},r.a.createElement("p",{className:"title"},"\u3044\u3064\u3082\u898b\u5b88\u3063\u3066\u308b\u307e\u3064\u308a\u3059")),r.a.createElement(E,{factor:1.5,position:4800,offset:-45},r.a.createElement(w,{name:"wave",width:100,x:50})),r.a.createElement(E,{factor:1.1,position:4800,offset:-80},r.a.createElement(w,{name:"art",width:100,x:125})),r.a.createElement(E,{factor:1.6,position:4800,offset:-75},r.a.createElement(w,{name:"music",width:100,x:410})),r.a.createElement(E,{factor:1.4,position:4800,offset:-50},r.a.createElement(w,{name:"cheer",width:100,x:210})),r.a.createElement(E,{factor:1.2,position:4800,offset:-40},r.a.createElement(w,{name:"sit",width:100,x:490})),r.a.createElement(E,{factor:1.8,position:4800,offset:-55},r.a.createElement(w,{name:"pc",width:100,x:310})),r.a.createElement(b,{start:4800,end:5100,offset:60},r.a.createElement("p",{className:"title"},"\u51fa\u6765\u308b\u3053\u3068\u306f\u9055\u3046\u3051\u308c\u3069"),r.a.createElement("p",{className:"title"},"\u611b\u3059\u308b\u6c17\u6301\u3061\u306f\u7686\u540c\u3058")),r.a.createElement(E,{factor:1.2,position:5600,offset:0},r.a.createElement(w,{name:"sit",width:100,x:10,tint:[1.1,10]}),r.a.createElement(w,{name:"sit",width:100,x:10,tint:[.9,-10]}),r.a.createElement(w,{name:"sit",width:100,x:10,tint:[.8,5]}),r.a.createElement(w,{name:"sit",width:100,x:10,tint:[1.3,20]}),r.a.createElement(w,{name:"sit",width:100,x:10,tint:[1.2,-15]})),r.a.createElement(g,{initialZoom:100,zoomStart:6e3,zoomEnd:8200,zoomDur:3e3,totalHeight:800}),r.a.createElement(y,{initialZoom:100,zoomStart:6e3,zoomDur:3e3,fadeStart:6700,fadeDur:1500,totalHeight:800}),r.a.createElement(b,{start:9400,end:1e4,layer:200,offset:5},r.a.createElement("img",{alt:"love",src:"/matsurisu/static/img/mosaic.png"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,a){e.exports=a(11)}},[[5,1,2]]]);
//# sourceMappingURL=main.c57a76a5.chunk.js.map