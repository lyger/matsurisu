(this.webpackJsonpmatsurisu_mania=this.webpackJsonpmatsurisu_mania||[]).push([[0],{12:function(e,t,a){e.exports=a(26)},17:function(e,t,a){},25:function(e,t){},26:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(9),o=a.n(c),s=(a(17),a(2)),i=a(1);function l(e){var t=e.y,a=e.setY,c=Object(r.useState)(!1),o=Object(s.a)(c,2),i=o[0],l=o[1],m=Object(r.useState)(0),u=Object(s.a)(m,2),f=u[0],E=u[1],d=Object(r.useState)(!1),h=Object(s.a)(d,2),p=h[0],g=h[1],v=function(){return l(!1)};return n.a.createElement("div",{className:"scroller",onPointerDown:function(e){var t=e.clientY;l(!0),E(t)},onPointerLeave:v,onPointerCancel:v,onPointerUp:v,onPointerMove:function(e){var r=e.clientY;i&&(g(!0),a(t+(r-f)),E(r))},onWheel:function(e){var r=e.deltaY;g(!0),a(t-r/2)}},n.a.createElement("div",{className:"scroll-prompt".concat(p?" hidden":"")},"\u30b9\u30af\u30ed\u30fc\u30eb"))}var m={width:625,height:0,y:0};function u(e,t){var a=t.type,r=t.value;switch(a){case"SET_HEIGHT":return Object(i.a)(Object(i.a)({},e),{},{height:r});case"SET_WIDTH":return Object(i.a)(Object(i.a)({},e),{},{width:r});case"SET_Y":return Object(i.a)(Object(i.a)({},e),{},{y:Math.max(Math.min(r,0),-15e3)});default:return e}}var f=Object(r.createContext)(0),E=Object(r.createContext)(m);function d(e){var t=e.children,a=Object(r.useReducer)(u,m),c=Object(s.a)(a,2),o=c[0],i=c[1],d=Object(r.useState)(0),h=Object(s.a)(d,2),p=h[0],g=h[1],v=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=setInterval((function(){return g(p+1)}),100);return function(){return clearInterval(e)}}),[p,g]);var y=Object(r.useCallback)((function(){if(v.current){var e=v.current.getBoundingClientRect();i({type:"SET_HEIGHT",value:e.height}),i({type:"SET_WIDTH",value:e.width})}}),[v,i]);return Object(r.useEffect)((function(){return window.addEventListener("resize",y),function(){return window.removeEventListener("resize",y)}}),[y]),Object(r.useLayoutEffect)(y,[y]),n.a.createElement(f.Provider,{value:p},n.a.createElement(E.Provider,{value:o},n.a.createElement(l,{y:o.y,setY:function(e){return i({type:"SET_Y",value:e})}}),n.a.createElement("div",{className:"main",ref:v},t)))}function h(e){var t=e.position,a=e.offset,c=e.stay,o=e.factor,i=e.children,l=Object(r.useRef)(null),m=Object(r.useContext)(E),u=Object(r.useState)(0),f=Object(s.a)(u,2),d=f[0],h=f[1];t=t||0,a=a||0,c=void 0===c?300:c;var p=(m.y+t)*o,g=Math.max(Math.min(p+c*o,0),p)+m.height/2+a,v=Math.floor(100*o),y=g-2*d>m.height||g+2*d<0,b=Object(r.useCallback)((function(){l.current&&h(l.current.getBoundingClientRect().height)}),[l,h]);return Object(r.useLayoutEffect)(b,[b]),y?null:n.a.createElement("div",{ref:l,className:"parallax",style:{left:0,top:g,zIndex:v}},n.a.Children.map(i,(function(e){return n.a.cloneElement(e,{onLoad:b})})))}var p=a(11);function g(e){var t=e.control,a=e.frameDur,r=e.srcs,c=e.alt,o=e.style,s=e.stagger,i=e.onLoad;s=s||0;for(var l=function(e,t,a){return t=t||1,Math.floor(e/t)%a}(t,a,r.length),m=Object(p.a)(r),u=0;u<s;u++)m.push(m.shift());return n.a.createElement("img",{alt:c,style:o,src:m[l],onLoad:i})}function v(e){var t=e.frameDur,a=e.srcs,c=e.alt,o=e.style,s=e.stagger,i=e.onLoad,l=Object(r.useContext)(f);return n.a.createElement(g,Object.assign({control:l},{frameDur:t,srcs:a,alt:c,style:o,stagger:s,onLoad:i}))}function y(e){var t=e.frameDur,a=e.srcs,c=e.alt,o=e.style,s=e.stagger,i=e.onLoad,l=Object(r.useContext)(E).y;return n.a.createElement(g,Object.assign({control:-l},{frameDur:t,srcs:a,alt:c,style:o,stagger:s,onLoad:i}))}function b(e){var t=e.name,a=e.x,r=e.y,c=e.stagger,o=e.width,l=e.tint,m=e.onLoad,u={display:"inline-block",position:"static",verticalAlign:"top",marginLeft:a||0,marginTop:r||0};if(o&&(u=Object(i.a)(Object(i.a)({},u),{},{width:o,height:"auto"})),l){var f=Object(s.a)(l,2),E=f[0],d=f[1];u=Object(i.a)(Object(i.a)({},u),{},{filter:"brightness(".concat(E,") hue-rotate(").concat(d,"deg)")})}return n.a.createElement(y,{alt:"matsurisu",style:u,frameDur:50,stagger:c,onLoad:m,srcs:["/matsurisu/static/img/risu/".concat(t,"1.png"),"/matsurisu/static/img/risu/".concat(t,"2.png")]})}function j(e){var t=e.name,a=e.x,r=e.y,c=e.center,o=e.stagger,l=e.width,m=e.tint,u=e.onLoad,f={};if(f=c?{display:"block",margin:"0 auto"}:{display:"inline-block",position:"relative",left:a||0,top:r||0},l&&(f=Object(i.a)(Object(i.a)({},f),{},{width:l,height:"auto"})),m){var E=Object(s.a)(m,2),d=E[0],h=E[1];f=Object(i.a)(Object(i.a)({},f),{},{filter:"brightness(".concat(d,") hue-rotate(").concat(h,"deg)")})}return n.a.createElement(v,{alt:"matsurisu",style:f,frameDur:5,stagger:o,onLoad:u,srcs:["/matsurisu/static/img/risu/".concat(t,"1.png"),"/matsurisu/static/img/risu/".concat(t,"2.png")]})}function w(e){var t=e.children,a=e.start,c=e.end,o=e.fadeDur,s=e.offset,i=e.layer;s=s||0,o=o||300,i=void 0===i?0:i;var l=Object(r.useContext)(E),m=-l.y,u=m>a-o&&m<c+o,f=1-(Math.max(Math.min((a-m)/o,1),0)+Math.max(Math.min((m-c)/o,1),0)),d=l.height/2+s;return u?n.a.createElement("div",{className:"fade",style:{top:d,opacity:f,zIndex:i}},t):null}function O(e){var t=e.start;return n.a.createElement(n.a.Fragment,null,n.a.createElement(h,{factor:1,position:t,offset:-50,stay:0},n.a.createElement(j,{name:"sit",width:200,center:!0})),n.a.createElement(w,{start:t,end:t,offset:50},n.a.createElement("p",{className:"title"},"\u307e\u3064\u308a\u3059")),n.a.createElement(h,{factor:1,position:t+800,offset:-50},n.a.createElement(j,{name:"cheer",width:200,center:!0})),n.a.createElement(w,{start:t+800,end:t+1100,offset:50},n.a.createElement("p",{className:"title"},"\u305d\u308c\u306f\u3001\u590f\u8272\u307e\u3064\u308a\u3092\u611b\u3059\u308b\u3082\u306e")))}function x(e){var t=e.start;return n.a.createElement(n.a.Fragment,null,n.a.createElement(h,{factor:1,position:t,offset:-50},n.a.createElement(j,{name:"wave",width:180,center:!0})),n.a.createElement(w,{start:t,end:t+300,offset:50},n.a.createElement("p",{className:"title"},"\u3044\u308d\u3093\u306a\u307e\u3064\u308a\u3059\u304c\u3044\u308b")),n.a.createElement(h,{factor:1.5,position:t+800,offset:0},n.a.createElement(j,{name:"art",width:200,x:50})),n.a.createElement(h,{factor:1,position:t+800,offset:0},n.a.createElement("p",{className:"title-right"},"\u7d75\u304c\u63cf\u3051\u308b\u307e\u3064\u308a\u3059")),n.a.createElement(h,{factor:1.5,position:t+1600,offset:0},n.a.createElement(j,{name:"music",width:200,x:400})),n.a.createElement(h,{factor:1,position:t+1600,offset:0},n.a.createElement("p",{className:"title-left"},"\u97f3\u697d\u304c\u3067\u304d\u308b\u307e\u3064\u308a\u3059")),n.a.createElement(h,{factor:1.5,position:t+2400,offset:-50},n.a.createElement(j,{name:"pc",width:200,center:!0})),n.a.createElement(h,{factor:1,position:t+2400,offset:50},n.a.createElement("p",{className:"title"},"\u3044\u3064\u3082\u898b\u5b88\u3063\u3066\u308b\u307e\u3064\u308a\u3059")),n.a.createElement(h,{factor:1.5,position:t+3200,offset:-45},n.a.createElement(j,{name:"wave",width:100,x:50})),n.a.createElement(h,{factor:1.1,position:t+3200,offset:-80},n.a.createElement(j,{name:"art",width:100,x:125})),n.a.createElement(h,{factor:1.6,position:t+3200,offset:-75},n.a.createElement(j,{name:"music",width:100,x:410})),n.a.createElement(h,{factor:1.4,position:t+3200,offset:-50},n.a.createElement(j,{name:"cheer",width:100,x:210})),n.a.createElement(h,{factor:1.2,position:t+3200,offset:-40},n.a.createElement(j,{name:"sit",width:100,x:490})),n.a.createElement(h,{factor:1.8,position:t+3200,offset:-55},n.a.createElement(j,{name:"pc",width:100,x:310})),n.a.createElement(w,{start:t+3200,end:t+3500,offset:60},n.a.createElement("p",{className:"title"},"\u51fa\u6765\u308b\u3053\u3068\u306f\u9055\u3046\u3051\u308c\u3069"),n.a.createElement("p",{className:"title"},"\u611b\u3059\u308b\u6c17\u6301\u3061\u306f\u7686\u540c\u3058")))}function M(e){var t=e.zoomStart,a=e.zoomDur,c=e.zoomEnd,o=e.initialZoom,s=e.totalHeight,i=Object(r.useContext)(E),l=i.width,m=i.height,u=i.y;if(u+t>0||u+c<0)return null;for(var f=Math.pow(Math.min(Math.max(-(u+t)/a,0),1),.6),d=m-(m/2+s/2)*f,h=(o-1)*(1-f)+1,p=(2*Math.ceil(l/(2*h))+1)/2,g=Math.floor(l/2-p),v=Math.floor(l/2+p),y=Math.ceil((m-d)/h),b=[],w=0;w<y;w++){for(var O=[],x=g;x<v;x++){var M="(".concat(x,",").concat(w,")");O.push(n.a.createElement(j,{key:M,name:"pixel",width:h,x:0,y:0}))}b.push(n.a.createElement("div",{className:"pixel-row",key:"row".concat(w),style:{height:h}},O))}return n.a.createElement("div",{style:{position:"absolute",top:d,width:l}},b)}function S(e){var t=e.zoomStart,a=e.zoomDur,c=e.fadeStart,o=e.fadeDur,s=e.initialZoom,i=e.totalHeight,l=Object(r.useContext)(E),m=l.width,u=l.height,f=l.y;if(f+t>0)return null;var d=Math.pow(Math.min(Math.max(-(f+t)/a,0),1),.6),h=u-(u/2+i/2)*d,p=(s-1)*(1-d)+1,g=1-Math.pow(Math.max(Math.min((c+o+f)/o,1),0),.5);return n.a.createElement("div",{className:"mosaic-wrapper",style:{top:h,opacity:g}},n.a.createElement("img",{className:"mosaic",alt:"matsuri",style:{width:p*m,height:p*i},src:"/matsurisu/static/img/mosaic_monochrome.gif"}))}function N(e){var t=e.start,a=e.dur,r=e.fadeStart,c=e.fadeDur;return n.a.createElement(n.a.Fragment,null,n.a.createElement(M,{initialZoom:100,zoomStart:t,zoomEnd:t+r+c,zoomDur:a,totalHeight:800}),n.a.createElement(S,{initialZoom:100,zoomStart:t,zoomDur:a,fadeStart:t+r,fadeDur:c,totalHeight:800}),n.a.createElement(w,{start:t+a+300,end:t+a+1300,layer:200},n.a.createElement("img",{alt:"love",src:"/matsurisu/static/img/mosaic.png"})),n.a.createElement(w,{start:t+a+300,end:t+a+1300,layer:500,offset:320},n.a.createElement("p",{className:"title-congrats"},"50\u4e07\u4eba\u304a\u3081\u3067\u3068\u3046\uff01\uff01\uff01")))}var Y=a(10);function D(e,t,a){return e()*(a-t)+t}function L(e){var t=e.num,a=e.seed,c=e.scatterX,o=e.scatterY,i=e.onLoad,l=Object(r.useState)([]),m=Object(s.a)(l,2),u=m[0],f=m[1],d=Object(r.useContext)(E).width;return Object(r.useEffect)((function(){for(var e=new Y.alea(a),r=[],n=0,s=0,i=0;i<t;i++){var l={x:D(e,0,c),y:D(e,-o/2,o/2)+o*s,tint:[D(e,.75,1.25),D(e,-15,15)],stagger:e()>.5?1:0};n+150+l.x>d&&(l.x-=d-150,s++),n+=150+l.x,r.push(l)}f(r)}),[t,a,c,o,d]),u.map((function(e,t){var r="".concat(a).concat(t);return n.a.createElement(b,{key:r,name:"run",width:150,stagger:e.stagger,x:e.x,y:e.y,tint:e.tint,onLoad:i})}))}function C(e){var t=e.start;return n.a.createElement(n.a.Fragment,null,n.a.createElement(w,{start:t,end:t+300},n.a.createElement("p",{className:"title"},"\u305d\u3057\u3066\u305d\u306e\u307e\u3064\u308a\u3059\u9054\u304c")),n.a.createElement(h,{factor:1.1,position:t+400,stay:0,offset:-100},n.a.createElement(L,{num:2,seed:"natsuiro",scatterX:70,scatterY:400})),n.a.createElement(h,{factor:1.4,position:t+400,stay:0,offset:300},n.a.createElement(L,{num:3,seed:"matsuri",scatterX:70,scatterY:400})),n.a.createElement(w,{start:t+800,end:t+1100},n.a.createElement("p",{className:"title"},"\u3069\u3093\u3069\u3093")),n.a.createElement(h,{factor:1.2,position:t+1200,stay:0,offset:-200},n.a.createElement(L,{num:3,seed:"we",scatterX:70,scatterY:200})),n.a.createElement(h,{factor:1.4,position:t+1200,stay:0},n.a.createElement(L,{num:2,seed:"love",scatterX:70,scatterY:200})),n.a.createElement(h,{factor:1,position:t+1200,stay:0,offset:200},n.a.createElement(L,{num:4,seed:"you",scatterX:70,scatterY:200})),n.a.createElement(w,{start:t+1600,end:t+1900},n.a.createElement("p",{className:"title"},"\u5897\u3048\u3066\u3044\u304f")),n.a.createElement(h,{factor:.9,position:t+2200,stay:0,offset:-200},n.a.createElement(L,{num:7,seed:"congratulations",scatterX:70,scatterY:250})),n.a.createElement(h,{factor:1.3,position:t+2200,stay:0},n.a.createElement(L,{num:8,seed:"500,000",scatterX:70,scatterY:250})),n.a.createElement(h,{factor:1.6,position:t+2200,stay:0,offset:200},n.a.createElement(L,{num:10,seed:"subscribers!",scatterX:70,scatterY:250})),n.a.createElement(h,{factor:.8,position:t+2600,stay:0,offset:-150},n.a.createElement(L,{num:12,seed:"we're",scatterX:70,scatterY:50})),n.a.createElement(h,{factor:1.1,position:t+2600,stay:0,offset:25},n.a.createElement(L,{num:17,seed:"always",scatterX:70,scatterY:50})),n.a.createElement(h,{factor:1.4,position:t+2600,stay:0,offset:200},n.a.createElement(L,{num:25,seed:"supporting",scatterX:60,scatterY:50})),n.a.createElement(h,{factor:1.25,position:t+2600,stay:0,offset:350},n.a.createElement(L,{num:30,seed:"you!",scatterX:50,scatterY:50})))}function z(){var e=Object(r.useContext)(E).y;return n.a.createElement(n.a.Fragment,null,e>-2e3&&n.a.createElement(O,{start:0}),e<-1200&&e>-6e3&&n.a.createElement(x,{start:1600}),e<-5600&&e>-9600&&n.a.createElement(C,{start:5800}),e<-9600&&n.a.createElement(N,{start:1e4,dur:3e3,fadeStart:700,fadeDur:1500}))}var X=function(){return n.a.createElement(d,null,n.a.createElement(z,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.dbfd10ac.chunk.js.map